<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-signin-client_id" content="377768704545-0777o7cao203rv36kofp95jc5fqtrlgi.apps.googleusercontent.com">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<body style="background: #1f2e3d;">
    
    <div class="container-fluid" id="app">

      <!-- Navigation -->
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark static-top" v-if = "currentDisplay != 'login' && currentDisplay != 'register'">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="" @click.prevent = 'logout()'>Log Out</a>
          </li>
          <li class="nav-item">
            <!-- Button trigger modal -->
            <button @click = 'clearKanban()' type="button" class="btn btn-primary" data-toggle="modal" data-target="#modalAdd">
              Add New
            </button>
          </li>
        </ul>
      </nav>

      <!-- REGISTER -->
      <div v-if = "currentDisplay == 'register'">
        <div class="d-flex justify-content-center p-5">
            <form class="bg-warning w-40 p-4" @submit.prevent = 'register()'>
                <h2 style="text-align: center;">Sign Up</h4><br>
                <label class="form-label">First Name</label>
                  <input v-model:value = 'user.firstName' type="text" class="form-control" placeholder="Daniel">
                <label class="form-label">Last Name</label>
                  <input v-model:value = 'user.lastName' type="text" class="form-control" placeholder="Johns">
                <label class="form-label">Email address</label>
                  <input v-model:value = 'user.email' type="email" class="form-control"  placeholder="name@example.com">
                <label class="form-label">Password</label>
                  <input v-model:value = 'user.password' type="password" class="form-control" placeholder="password">
                <br>          
                <div class="d-flex justify-content-around">
                  <button type="submit" class="btn btn-outline my-2 my-sm-0 btn-primary w-50">Register</button>
                  <button type="reset" class="btn btn-outline my-2 my-sm-0 btn-primary w-50">Reset</button>
                </div>
                <div class="dropdown-divider"></div>
                <a href="" @click.prevent = 'showLogin()'>Alredy have account! Log in</a>
            </form>
        </div>
      </div>

      <!-- LOGIN -->
      <div v-if = "currentDisplay == 'login'">
        <div class="d-flex justify-content-center p-5">
            <form class="bg-warning w-40 p-4" @submit.prevent = 'login()'>
                <h2 style="text-align: center;">Sign In</h4><br>
                <label class="form-label">Email address</label>
                  <input v-model:value = 'user.email' type="email" class="form-control" placeholder="name@example.com">
                <br>
                <label class="form-label">Password</label>
                  <input v-model:value = 'user.password' type="password" class="form-control" placeholder="password">
                <br>
                <div class="d-flex justify-content-around">
                  <button type="submit" class="btn btn-outline my-2 my-sm-0 btn-primary w-50">Log in</button>
                  <button type="reset" class="btn btn-outline my-2 my-sm-0 btn-primary w-50">Reset</button>
                </div>
                <div class="dropdown-divider"></div>
                <div style="float: right;" class="g-signin2" data-onsuccess="onSignIn"></div><br><br>
                <div class="dropdown-divider"></div>
                <a href="" @click.prevent = 'showRegister()'>New around here? Register</a>
            </form>
        </div>
      </div>

      <!-- KANBA -->
      <div v-if = "currentDisplay == 'kanban'" class="d-flex">
          
          <!-- COL 1 -->
          <div class="flex-column w-25">
            <div class="bg-warning m-2 p-2">
              <h4 class="text-center">BACK_LOG</h4>

              <div class="card m-2" v-for = 'backLog in backLogs' :key = 'backLog.id'>
                <div class="card-body">
                  <h5 class="card-title">{{backLog.title}}</h5>
                  <div class="dropdown-divider border border-dark"></div>
                  <p class="card-text">{{backLog.description}}</p>
                  <div class="dropdown-divider border border-dark"></div>
                  <button @click = 'findOne(backLog.id)' class="btn btn-primary btn-sm" data-toggle="modal" data-target="#modalEdit">Edit</button>
                  <button @click = 'destroy(backLog.id)' class="btn btn-primary btn-sm">Delete</button>
                  <button @click = 'patch("TODO",backLog.id)' class="btn btn-primary btn-sm">Go to Todo</button>
                </div>
              </div>

            </div>
          </div>

          <!-- COL 2 -->
          <div class="flex-column w-25">
            
            <div class="bg-info m-2 p-2">
              <h4 class="text-center">TODO</h4>
          
              <div class="card m-2" v-for = 'todo in todos' :key = 'todo.id'>
                <div class="card-body">
                  <h5 class="card-title">{{todo.title}}</h5>
                  <div class="dropdown-divider border border-dark"></div>
                  <p class="card-text">{{todo.description}}</p>
                  <div class="dropdown-divider border border-dark"></div>
                  <button @click = 'patch("BACK-LOG",todo.id)' class="btn btn-primary btn-sm">Back to Log</button>
                  <button class="btn btn-primary btn-sm">Edit</button>
                  <button @click = 'destroy(todo.id)' class="btn btn-primary btn-sm">Delete</button>
                  <button @click = 'patch("ON-PROGRES",todo.id)' class="btn btn-primary btn-sm">Go Progres</button>
                </div>
              </div>

            </div>
          </div>

          <!-- COL 3 -->
          <div class="flex-column w-25">
            
            <div class="bg-primary m-2 p-2">
              <h4 class="text-center">ON_PROGRESS</h4>

              <div class="card m-2" v-for = 'onProgres in onProgress' :key = 'onProgres.id'>
                <div class="card-body">
                  <h5 class="card-title">{{onProgres.title}}</h5>
                  <div class="dropdown-divider border border-dark"></div>
                  <p class="card-text">{{onProgres.description}}</p>
                  <div class="dropdown-divider border border-dark"></div>
                  <button @click = 'patch("TODO",onProgres.id)' class="btn btn-primary btn-sm">Back to Todo</button>
                  <button class="btn btn-primary btn-sm">Edit</button>
                  <button @click = 'destroy(onProgres.id)' class="btn btn-primary btn-sm">Delete</button>
                  <button @click = 'patch("DONE",onProgres.id)' class="btn btn-primary btn-sm">Mark as Done</button>
                </div>
              </div>

            </div>
          </div>

          <!-- COL 4 -->
          <div class="flex-column w-25">
            
            <div class="bg-danger m-2 p-2">
              <h4 class="text-center">DONE</h4>
            
              <div class="card m-2" v-for = 'done in dones' :key = 'done.id'>
                <div class="card-body">
                  <h5 class="card-title">{{done.title}}</h5>
                  <div class="dropdown-divider border border-dark"></div>
                  <p class="card-text">{{done.description}}</p>
                  <div class="dropdown-divider border border-dark"></div>
                  <button @click = 'patch("ON-PROGRES",done.id)' class="btn btn-primary btn-sm">Back to Progres</button>
                  <button class="btn btn-primary btn-sm">Edit</button>
                  <button @click = 'destroy(done.id)' class="btn btn-primary btn-sm">Delete</button>
                </div>
              </div>

            </div>
          </div>

          <!-- Modal Edit-->
          <div class="modal fade" id="modalEdit" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <!-- CONTENT -->
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLongTitle"></h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <!-- BODY -->
                    <div class="modal-body">
                      <label>Title</label>
                      <input v-model:value = 'task.title' class="w-100"/>
                      <hr>
                      <label>Description</label>
                      <textarea v-model:value = 'task.description' class="w-100"></textarea>
                      <hr>
                      <label>Point</label>
                      <input v-model:value = 'task.point' class="w-100"/>
                      <hr>
                      <label>Assign to</label>
                      <input v-model:value = 'task.assignTo' class="w-100"/>
                    </div>
                <!-- Footer -->
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <button @click = 'put' type="click" class="btn btn-primary" data-dismiss="modal">Submit</button>
                </div>
              </div>
            </div>
          </div>
          

          <!-- Modal Add-->
          <div class="modal fade" id="modalAdd" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <!-- CONTENT -->
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLongTitle"></h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <!-- BODY -->
                    <div class="modal-body">
                      <label>Title</label>
                      <input v-model:value = 'task.title' class="w-100"/>
                      <hr>
                      <label>Description</label>
                      <textarea v-model:value = 'task.description' class="w-100"></textarea>
                      <hr>
                      <label>Point</label>
                      <input v-model:value = 'task.point' class="w-100"/>
                      <hr>
                      <label>Assign to</label>
                      <input v-model:value = 'task.assignTo' class="w-100"/>
                    </div>
                <!-- Footer -->
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <button @click = 'add()' type="button" class="btn btn-primary" data-dismiss="modal">Submit</button>
                </div>
              </div>
            </div>
          </div>

      </div>
    </div>

      <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
      <script src="https://apis.google.com/js/platform.js" async defer></script>
      <script src="https://unpkg.com/axios/dist/axios.min.js" ></script>
      <script src="./main.js"></script>
</body>
</html>